{"note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"All in one installation script for OpenStack","body":"openstack_install\r\n=================\r\n\r\nAll in one installation script for OpenStack\r\n\r\n24th Aug 2012 @jedipunkz\r\n\r\n<img src=\"http://jedipunkz.github.com/pix/openstack_thinkpad.jpg\">\r\n\r\nYou can one click install to mobile pc.\r\n\r\nOverview\r\n--------\r\nOpenStack All In One Instrallation Script. These compornents of OpenStack will be\r\ninstalled on only 1 node. nova, glance, keystone, swift.\r\n\r\nPrecondition\r\n------------\r\n\r\nNode that you want to use for installation must have these environment.\r\n\r\n* Ubuntu Server 12.04 LTS amd64\r\n* Intel-VT or AMD-V machine\r\n* 1 NIC or more NICs, it doesn't matter. :)\r\n\r\nStructure\r\n---------\r\n\r\n    +--+--+--+\r\n    |VM|VM|VM|  192.168.4.32/27\r\n    +--+--+--+..\r\n    +----------+ +--------+\r\n    |          | | br100  | 192.168.4.33/27 -> floating range : 10.200.8.32/27\r\n    |          | +--------+\r\n    |          | | eth0:0 | 192.168.3.1       disk devices\r\n    |   Host   | +--------+   (dummy)  +------------------------+\r\n    |          |                       | /dev/sda6 nova-volumes |\r\n    |          | +--------+            +------------------------+\r\n    |          | |  eth0  | ${HOST_IP} | /dev/sda7 swift        |\r\n    +----------+ +--------+            +------------------------+\r\n    |              nw I/Fs\r\n    +----------+\r\n    |   CPE    |\r\n    +----------+\r\n\r\nInstallation\r\n------------\r\n\r\n    % sudo -i\r\n    # git clone git://github.com/jedipunkz/openstack_install.git\r\n    # chmod +x openstack_install/openstack_install.sh\r\n    # ./openstak_install/openstack_install.sh allinone\r\n    ( wait some minutes...)\r\n\r\nAdditional Operation\r\n--------------------\r\n\r\nAfter installation, you have to add OS Image to glance for building VMs. Here, I show you operation that you have to.\r\n\r\n#### create OS images\r\n\r\nCreate a OS Image on this node. for example I show you that operation for\r\nubuntu server 12.04 LTS image.\r\n\r\n    # kvm-image create -f qcow2 server.img 5G\r\n\t# wget http://gb.releases.ubuntu.com//precise/ubuntu-12.04-server-amd64.iso\r\n\t# kvm -m 256 -cdrom ubuntu-12.04-server-amd64.iso -drive file=server.img,if=virtio,index=0 -boot d -net nic -net user -nographic -vnc :0\r\n\r\nConnect VNC to ${node_IP}:0, and install OS on VNC Tool. When you finish\r\ninstallation operation, re-run kvm command to boot from hard disk.\r\n\r\n    # kvm -m 256 -drive file=server.img,if=virtio,index=0 -boot c -net nic -net user -nographic -vnc :0\r\n\r\nRe-connect VNC to ${node_IP}:0, and execute this command.\r\n\r\n    # sudo rm -rf /etc/udev/rules.d/70-persistent-net.rules\r\n    # shutdown -h now\r\n\r\n#### add OS image to glance\r\n\r\nAdd server.img to glance for OS image template on OpenStack.\r\n\r\n    # source ~/.openstack # if you use bash, exec this command \". ~/.openstack\"\r\n    # glance add name=\"Ubuntu Server 12.04LTS\" is_public=true container_format=ovf disk_format=qcow2 < server.img\r\n\r\n#### Create ssh keypair and install that\r\n\r\nCreate SSH-Keypair and install that to OpenStack Nova.\r\n\r\n    # ssh-keygen\r\n\t# nova keypair-add --pub_key .ssh/id_rsa.pub mykey\r\n\t# nova keypair-list\r\n\r\n#### Open Dashboard : Horizon\r\n\r\nOperation was done. Open http://${node_IP} to use Horizon (OpenStack\r\nDashboard) and create some VMs.\r\n\r\n<http://docs.openstack.org/essex/openstack-compute/starter/os-compute-starterguide-trunk.pdf>","name":"All In One Openstack installation","google":"UA-30563095-2"}